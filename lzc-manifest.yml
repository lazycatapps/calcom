# app çš„å”¯ä¸€ id,ä¸Šæ¶åˆ°å•†åº—éœ€è¦ä¿è¯ä¸è¦å†²çª,å°½é‡ä½¿ç”¨å¼€å‘è€…è‡ªå·±çš„åŸŸåä½œä¸ºåç¼€.
package: cloud.lazycat.app.liu.calcom
# app çš„ç‰ˆæœ¬
version: 5.7.1-1

name: cal.com
keyword: calendar,booking,scheduling,æ—¥ç¨‹,é¢„çº¦
description: å¼€æºæ—¥ç¨‹å®‰æ’å’Œé¢„çº¦ç®¡ç†å¹³å°

# è½¯ä»¶åç§°,ä¼šæ˜¾ç¤ºåœ¨å¯åŠ¨å™¨ä¹‹ç±»çš„åœ°æ–¹
locales:
  zh:
    name: cal.com æ—¥ç¨‹ç®¡ç†
    description: |
      ## cal.com - å¼€æºæ—¥ç¨‹å®‰æ’å¹³å°

      cal.com æ˜¯ä¸€ä¸ªå¼€æºçš„æ—¥ç¨‹å®‰æ’å’Œé¢„çº¦ç®¡ç†å¹³å°ï¼Œæä¾›çµæ´»çš„æ—¥ç¨‹è°ƒåº¦åŠŸèƒ½ã€‚

      **å®˜æ–¹ç½‘ç«™ï¼š** https://cal.com

      **ä»“åº“åœ°å€ï¼š** https://github.com/lazycatapps/calcom.git

      ## ä¸»è¦åŠŸèƒ½

      - ğŸ“… æ™ºèƒ½æ—¥ç¨‹å®‰æ’å’Œé¢„çº¦ç®¡ç†
      - ğŸ”— å¤šç§æ—¥å†é›†æˆ (Google Calendar, Outlook ç­‰)
      - ğŸ¨ å¯è‡ªå®šä¹‰çš„é¢„çº¦é¡µé¢
      - ğŸ“Š å›¢é˜Ÿåä½œå’Œæ—¥ç¨‹ç®¡ç†
      - ğŸ”Œ ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹é›†æˆ (Zoom, Google Meet ç­‰)
      - ğŸ“§ è‡ªåŠ¨é‚®ä»¶æé†’
      - ğŸŒ å¤šè¯­è¨€æ”¯æŒ

      ## ä½¿ç”¨è¯´æ˜

      1. é¦–æ¬¡è®¿é—®æ—¶éœ€è¦æ³¨å†Œè´¦å·
      2. é…ç½®æ‚¨çš„æ—¥å†é›†æˆ
      3. åˆ›å»ºé¢„çº¦ç±»å‹å’Œæ—¥ç¨‹è§„åˆ™
      4. åˆ†äº«æ‚¨çš„é¢„çº¦é“¾æ¥ç»™ä»–äºº
      5. ç®¡ç†é¢„çº¦å’Œæ—¥ç¨‹

  en:
    name: cal.com
    description: |
      ## cal.com - Open Source Scheduling Platform

      cal.com is an open-source scheduling and booking platform that provides flexible calendar scheduling capabilities.

      **Official website:** https://cal.com

      **Repository:** https://github.com/lazycatapps/calcom.git

      ## Main Features

      - ğŸ“… Smart scheduling and booking management
      - ğŸ”— Multiple calendar integrations (Google Calendar, Outlook, etc.)
      - ğŸ¨ Customizable booking pages
      - ğŸ“Š Team collaboration and schedule management
      - ğŸ”Œ Rich third-party integrations (Zoom, Google Meet, etc.)
      - ğŸ“§ Automatic email reminders
      - ğŸŒ Multi-language support

      ## Usage Instructions

      1. Register an account on first visit
      2. Configure your calendar integrations
      3. Create booking types and scheduling rules
      4. Share your booking link with others
      5. Manage bookings and schedules

# è½¯ä»¶æœ¬èº«çš„ license
license: https://github.com/calcom/cal.com?tab=License-1-ov-file

# è½¯ä»¶çš„ä¸»é¡µ,ä¼šåœ¨å•†åº—ç­‰åœ°æ–¹ä½“ç°
homepage: https://github.com/calcom/cal.com

# lpk çš„ä½œè€…,ä¼šåœ¨å•†åº—ç­‰åœ°æ–¹ä½“ç°
author: liu

# application ä½œä¸ºä¸€ä¸ªç‰¹æ®Šçš„ container è¿è¡Œï¼Œå¯¹åº”çš„ service åç§°ä¸ºå›ºå®šçš„`app`ï¼Œ å…¶ä»– service å¯ä»¥é€šè¿‡æ­¤åç§°ä¸ app è¿›è¡Œé€šè®¯
application:
  # æ˜¯å¦å­˜åœ¨åå°ä»»åŠ¡ï¼Œ è‹¥å­˜åœ¨åˆ™ç³»ç»Ÿä¸ä¼šå¯¹æ­¤ app è¿›è¡Œä¸»åŠ¨ä¼‘çœ ç­‰æ“ä½œ
  background_task: true

  # æœŸæœ›çš„ app åŸŸåï¼Œå¦‚æœç³»ç»Ÿä¸­å·²ç»æœ‰å¯¹åº”åŸŸååˆ™ä¼šæç¤ºç”¨æˆ·é€‰æ‹©å…¶ä»–åŸŸåã€‚ æœ€ç»ˆ app åˆ†é…åˆ°çš„åŸŸåä»¥/lzcapp/run/app.subdomain ä¸ºå‡†
  subdomain: calcom

  routes:
    - /=http://calcom:3000

  # é¡µé¢æœ¬èº«æ˜¯æœ‰é‰´æƒçš„ï¼Œæ‰€ä»¥å¯ä»¥ä¸éœ€è¦ lazycat çš„é‰´æƒã€‚
  # å¦‚æœä¸å¼€å¯è¯¥é€‰é¡¹ï¼Œä¼šå¯¼è‡´ OAuth2.0 è®¤è¯å¤±è´¥ï¼Œä¸­é—´å¤šäº†ä¸€ä¸ªé‰´æƒé¡µé¢ã€‚
  public_path:
    - /                         # æ— éœ€ç™»å½•å³å¯è®¿é—®

  depends_on:
    - calcom

  # å› ä¸ºè¯¥æ–¹æ³•æ— æ³•æä¾›é‰´æƒï¼Œ æ‰€ä»¥ä¸å»ºè®®å¼€å¯
  # ingress:
  #   # Prisma Studio ç®¡ç†ç•Œé¢
  #   - protocol: tcp
  #     port: 5555
  #     service: studio
  #     description: Prisma Studio æ•°æ®åº“ç®¡ç†
  #     publish_port: "5555" # å¯¹å¤–æš´éœ²çš„ç«¯å£å·

  # æ˜¯å¦å¯ç”¨å¤šå®ä¾‹
  multi_instance: false

services:
  database:
    # lzc-cli appstore copy-image postgres
    image: registry.lazycat.cloud/liu/library/postgres:d654144cefca4d81
    environment:
      - POSTGRES_USER=unicorn_user
      - POSTGRES_PASSWORD=magical_password
      - POSTGRES_DB=calendso
    binds:
      - /lzcapp/var/postgres:/var/lib/postgresql
    health_check:
      test:
        - CMD-SHELL
        - pg_isready -d calendso -U unicorn_user
      start_period: 20s

  calcom:
    # lzc-cli appstore copy-image calcom.docker.scarf.sh/calcom/cal.com
    image: registry.lazycat.cloud/liu/calcom/cal.com:350c81c4180e9653
    environment:
      # License ç›¸å…³
      - NEXT_PUBLIC_LICENSE_CONSENT=
      - LICENSE=
      # åº”ç”¨ URL é…ç½®
      - NEXT_PUBLIC_WEBAPP_URL=https://calcom.${LAZYCAT_BOX_NAME}.heiyu.space
      - NEXT_PUBLIC_API_V2_URL=https://calcom.${LAZYCAT_BOX_NAME}.heiyu.space/api/v2
      - NEXT_PUBLIC_WEBSITE_TERMS_URL=
      - NEXT_PUBLIC_WEBSITE_PRIVACY_POLICY_URL=
      - NEXT_PUBLIC_SINGLE_ORG_SLUG=
      # ç»„ç»‡åŠŸèƒ½
      - ORGANIZATIONS_ENABLED=
      # NextAuth é…ç½®
      - NEXTAUTH_URL=https://calcom.${LAZYCAT_BOX_NAME}.heiyu.space
      # å®‰å…¨å¯†é’¥ (ç”Ÿäº§ç¯å¢ƒå»ºè®®ä¿®æ”¹)
      - NEXTAUTH_SECRET=secret
      - CALENDSO_ENCRYPTION_KEY=secret
      # æ•°æ®åº“è¿æ¥
      - DATABASE_HOST=database:5432
      - DATABASE_URL=postgresql://unicorn_user:magical_password@database:5432/calendso
      - DATABASE_DIRECT_URL=postgresql://unicorn_user:magical_password@database:5432/calendso
      # ç¬¬ä¸‰æ–¹é›†æˆ
      - GOOGLE_API_CREDENTIALS={}
      # å…¶ä»–é…ç½®
      - CALCOM_TELEMETRY_DISABLED=1
      - NODE_ENV=production
      - CSP_POLICY=
    depends_on:
      - database
    health_check:
      test:
        - CMD-SHELL
        # Next.js ä½¿ç”¨æµå¼æ¸²æŸ“ï¼Œwget ä¼šå¡åœ¨ç­‰å¾…å®Œæ•´å“åº”
        # ä½¿ç”¨ timeout å¼ºåˆ¶ 3 ç§’åç»ˆæ­¢ï¼Œé€€å‡ºç  0(æˆåŠŸ) æˆ– 124(è¶…æ—¶) éƒ½è§†ä¸ºå¥åº·
        - 'timeout 3 wget --spider -q http://localhost:3000 2>&1; ret=$$?; [ $$ret -eq 0 ] || [ $$ret -eq 124 ]'
      start_period: 30s
      interval: 10s
      timeout: 5s
      retries: 10

  # å› ä¸ºæ— æ³•æä¾›é‰´æƒï¼Œæ‰€ä»¥æš‚ä¸å¼€å¯è¯¥ç®¡ç†ç•Œé¢
  # studio:
  #   # lzc-cli appstore copy-image calcom.docker.scarf.sh/calcom/cal.com
  #   image: registry.lazycat.cloud/liu/calcom/cal.com:350c81c4180e9653
  #   environment:
  #     # License ç›¸å…³
  #     - NEXT_PUBLIC_LICENSE_CONSENT=
  #     - LICENSE=
  #     # åº”ç”¨ URL é…ç½®
  #     - NEXT_PUBLIC_WEBAPP_URL=http://calcom:3000
  #     - NEXT_PUBLIC_API_V2_URL=http://studio:5555/api/v2
  #     - NEXT_PUBLIC_WEBSITE_TERMS_URL=
  #     - NEXT_PUBLIC_WEBSITE_PRIVACY_POLICY_URL=
  #     - NEXT_PUBLIC_SINGLE_ORG_SLUG=
  #     # ç»„ç»‡åŠŸèƒ½
  #     - ORGANIZATIONS_ENABLED=
  #     # å®‰å…¨å¯†é’¥
  #     - NEXTAUTH_SECRET=secret
  #     - CALENDSO_ENCRYPTION_KEY=secret
  #     # æ•°æ®åº“è¿æ¥
  #     - DATABASE_URL=postgresql://unicorn_user:magical_password@database:5432/calendso
  #     - DATABASE_DIRECT_URL=postgresql://unicorn_user:magical_password@database:5432/calendso
  #     # ç¬¬ä¸‰æ–¹é›†æˆ
  #     - GOOGLE_API_CREDENTIALS={}
  #     # å…¶ä»–é…ç½®
  #     - CALCOM_TELEMETRY_DISABLED=1
  #     - NODE_ENV=production
  #     - CSP_POLICY=
  #   command: npx prisma studio
  #   depends_on:
  #     - database
  #   health_check:
  #     test:
  #       - CMD-SHELL
  #       - wget --spider -q http://localhost:5555 || exit 1
  #     start_period: 30s
  #     interval: 30s
  #     timeout: 30s
